{"version":3,"sources":["logo.svg","App.tsx","index.tsx"],"names":["initFireBase","apiKey","firebaseConfig","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","firebase","initializeApp","firestore","generateCode","randomString","generate","createNewCode","firebaseDb","code","type","newCode","activeCount","collection","add","getParam","queryString","window","location","search","URLSearchParams","get","App","React","useState","loading","setLoading","status","setStatus","useEffect","a","start","className","src","logo","alt","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"mcAAe,MAA0B,iC,kCCS5BA,EAAe,SAACC,GACzB,IAAMC,EAAiB,CACnBD,OAAQA,EACRE,WAAY,8CACZC,UAAW,8BACXC,cAAe,0CACfC,kBAAmB,eACnBC,MAAO,4CACPC,cAAe,gBAInB,OADAC,IAASC,cAAcR,GAChBO,IAASE,aASpB,SAASC,IACL,MAAO,OAASC,IAAaC,SAAS,GAG1C,SAASC,EAAcC,EAA0CC,EAAcC,GAC3E,IAAMC,EAAuB,CACzBF,OACAG,YAAa,EACbF,QAEJ,OAAOF,EAAWK,WAAW,SAASC,IAAIH,GAG9C,SAASI,IACL,IAAMC,EAAcC,OAAOC,SAASC,OAGpC,OAFmB,IAAIC,gBAAgBJ,GACdK,IAAI,QAsDlBC,MAnDf,WAAgB,IAAD,EACmBC,IAAMC,UAAkB,GAD3C,mBACJC,EADI,KACKC,EADL,OAEiBH,IAAMC,SAAiB,IAFxC,mBAEJG,EAFI,KAEIC,EAFJ,KAmCX,OA/BAL,IAAMM,WAAU,WAAM,4CAClB,gCAAAC,EAAA,0DACQpB,EAA+BK,OACZ,OAATL,GAA0B,SAATA,GAFnC,uBAGQgB,GAAW,GACXE,EAAU,0BAJlB,gCAQiB,OAATlB,EAAeA,EAAO,EACR,SAATA,IAAiBA,EAAO,GATrC,SAYcT,EAAWT,EACb,2CAGEiB,EAAOL,IAhBrB,UAiB8BG,EAAcN,EAAUQ,EAAMC,GAjB5D,eAkBQgB,GAAW,GACXE,EACI,sDAAwDnB,GApBpE,kDAuBQmB,EAAU,qDAvBlB,2DADkB,uBAAC,WAAD,wBA4BlBG,KACD,IAGC,qBAAKC,UAAU,MAAf,SACI,yBAAQA,UAAU,aAAlB,UACI,qBAAKC,IAAKC,EAAMF,UAAU,WAAWG,IAAI,SACxCV,GACG,yCACY,wCADZ,SAKQ,KAAXE,GAAiB,4BAAIA,UCxFtCS,IAASC,OACL,cAAC,IAAMC,WAAP,UACI,cAAC,EAAD,MAEJC,SAASC,eAAe,W","file":"static/js/main.5609c3be.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import React from 'react';\nimport randomString from 'randomstring';\n\nimport logo from './logo.svg';\nimport './App.css';\n\nimport firebase from 'firebase/app';\nimport 'firebase/firestore';\n\nexport const initFireBase = (apiKey: string): firebase.firestore.Firestore => {\n    const firebaseConfig = {\n        apiKey: apiKey,\n        authDomain: 'dyl-download-facebook-video.firebaseapp.com',\n        projectId: 'dyl-download-facebook-video',\n        storageBucket: 'dyl-download-facebook-video.appspot.com',\n        messagingSenderId: '271560387484',\n        appId: '1:271560387484:web:0c1342212a1d2a0fae3659',\n        measurementId: 'G-F0TK2F0TDY',\n    };\n    // Initialize Firebase\n    firebase.initializeApp(firebaseConfig);\n    return firebase.firestore();\n};\n\ninterface ICodeActive {\n    code: string;\n    activeCount: number;\n    type: number;\n}\n\nfunction generateCode(): string {\n    return 'DYL-' + randomString.generate(5);\n}\n\nfunction createNewCode(firebaseDb: firebase.firestore.Firestore, code: string, type: number) {\n    const newCode: ICodeActive = {\n        code,\n        activeCount: 1,\n        type\n    };\n    return firebaseDb.collection('codes').add(newCode);\n}\n\nfunction getParam() {\n    const queryString = window.location.search;\n    const parameters = new URLSearchParams(queryString);\n    const value = parameters.get('type');\n    return value;\n}\nfunction App() {\n    const [loading, setLoading] = React.useState<Boolean>(true);\n    const [status, setStatus] = React.useState<string>('');\n\n    React.useEffect(() => {\n        async function start() {\n            let type: string | number | null = getParam();\n            if (!type || (type !== '46' && type !== '2905')) {\n                setLoading(false);\n                setStatus(`You shoudn't be here: `);\n                return;\n            }\n\n            if (type === '46') type = 1;\n            else if (type === '2905') type = 2;\n\n            try {\n                const firebase = initFireBase(\n                    'AIzaSyAcMn_LZqi2IKdieJi1aziEdWVPNz9piRs'\n                );\n\n                const code = generateCode();\n                const codeIns = await createNewCode(firebase, code, type);\n                setLoading(false);\n                setStatus(\n                    'Get code success, use this code to active feature: ' + code\n                );\n            } catch (err) {\n                setStatus('Error occur, cannot get code, contact the fanpage');\n            }\n        }\n\n        start();\n    }, []);\n\n    return (\n        <div className='App'>\n            <header className='App-header'>\n                <img src={logo} className='App-logo' alt='logo' />\n                {loading && (\n                    <p>\n                        Getting <code>Code</code>...\n                    </p>\n                )}\n\n                {status !== '' && <p>{status}</p>}\n            </header>\n        </div>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n"],"sourceRoot":""}